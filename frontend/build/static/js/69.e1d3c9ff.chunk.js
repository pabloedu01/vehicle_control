(this["webpackJsonphyper-react"]=this["webpackJsonphyper-react"]||[]).push([[69],{1351:function(e,c,t){"use strict";t.r(c);var i=t(50),l=t(8),n=t(11),s=t(0),a=t(160),d=t(803),o=t(222),r=t(89),j=t(804),h=t(353),b=t(22),v=t(6),u=t(28),m=t(40),O=t.n(m),x=t(1),p=new b.a;c.default=function(e){Object(v.f)();var c,t,b,m,f,g,N,y=Object(v.g)(),S=y.id,k=y.type,w=y.checklistId,C=Object(s.useState)(null),I=Object(n.a)(C,2),z=I[0],_=I[1],V=Object(s.useState)(null),E=Object(n.a)(V,2),D=E[0],Y=E[1],H=Object(s.useState)([]),M=Object(n.a)(H,2),P=M[0],B=M[1],F=Object(s.useState)([]),J=Object(n.a)(F,2),A=J[0],R=J[1],T=Object(s.useState)({}),U=Object(n.a)(T,2),q=U[0],G=U[1],K=Object(s.useState)(!1),L=Object(n.a)(K,2),Q=L[0],W=L[1],X=Object(s.useState)(null),Z=Object(n.a)(X,2),$=Z[0],ee=Z[1],ce=Object(s.useState)(null),te=Object(n.a)(ce,2),ie=te[0],le=te[1],ne=function(e){ee(e),W(!0)},se=function(e,c){e.preventDefault(),le(c)};return Object(s.useEffect)((function(){A.length>0&&le(A[0])}),[A]),Object(s.useEffect)((function(){!function(){if(S){var e;switch(k){case"service-schedules":e=p.get("/vehicle-service/"+w)}e.then((function(e){var c;switch(k){case"service-schedules":var t,n={},s=e.data.data,a=s.brand,d=s.client,o=s.vehicle,r=s.technical_consultant,j=s.checklist_version,h=s.service_schedule,b=h.client_vehicle,v=Object(l.a)(h,["client_vehicle"]),u=Object(l.a)(s,["brand","client","vehicle","technical_consultant","checklist_version","service_schedule"]);t={brand:a,client:d,technicalConsultant:r,vehicle:o,serviceSchedule:v,checklistVersion:j,clientVehicle:b},u.items.forEach((function(e){n[e.id]={id:e.id,value:e.pivot.value,evidence:e.pivot.evidence,observations:e.pivot.observations,type:e.validation.type}}));var m=u.stages.filter((function(e){return e.pivot.processed}));m.forEach((function(e,c){var t;m[c].evidences=(t=[]).concat.apply(t,Object(i.a)(e.items.map((function(e){var c;return((null===(c=n[e.id])||void 0===c?void 0:c.evidence)||[]).map((function(c){return{evidence:c,name:e.name,observations:n[e.id].observations}}))}))))})),R((c=[]).concat.apply(c,Object(i.a)(m.map((function(e){return e.evidences}))))),Y(u),B(m),G(n),_(t);break;default:_(e.data.data)}}),(function(e){_(null)}))}else _(null)}()}),[S,k,w]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{show:Q,onHide:function(){ee(null),W(!1)},size:"lg",scrollable:!0,centered:!0,children:Object(x.jsxs)(d.a.Body,{className:"p-0",style:{minHeight:"300px"},children:[Object(x.jsx)("img",{className:"d-block w-100",src:null===$||void 0===$?void 0:$.evidence}),Object(x.jsxs)("div",{className:"carousel-caption",children:[Object(x.jsx)("h3",{children:null===$||void 0===$?void 0:$.name}),Object(x.jsx)("p",{children:null===$||void 0===$?void 0:$.observations})]})]})}),Object(x.jsx)(a.a,{breadCrumbItems:[{label:"Checklist",path:"/".concat(k,"/").concat(S,"/checklist")},{label:"Visualizaci\xf3n",path:"/".concat(k,"/").concat(S,"/checklist/").concat(w),active:!0}],title:"Checklist",company:null===e||void 0===e?void 0:e.company}),Object(x.jsx)(o.a,{children:Object(x.jsx)(r.a,{xs:12,children:Object(x.jsx)(j.a,{children:Object(x.jsxs)(j.a.Body,{children:[Object(x.jsxs)(o.a,{className:"align-items-center",children:[A.length>0?Object(x.jsxs)(r.a,{lg:5,children:[Object(x.jsx)(u.b,{to:"#",className:"text-center d-block mb-4",children:Object(x.jsx)("img",{onClick:function(e){ne(ie)},src:null===ie||void 0===ie?void 0:ie.evidence,className:"img-fluid",style:{width:"350px",height:"300px"},alt:null===ie||void 0===ie?void 0:ie.name})}),Object(x.jsx)("div",{className:"d-flex justify-content-center",children:A.map((function(e){return Object(x.jsx)(u.b,{to:"#",onMouseOver:function(c){se(c,e)},onClick:function(c){se(c,e),ne(e)},children:Object(x.jsx)("img",{src:e.evidence,className:"img-fluid img-thumbnail p-2",style:{width:"75px",height:"70px"},alt:e.name})})}))})]}):null,Object(x.jsx)(r.a,{lg:7,children:Object(x.jsxs)("form",{className:"ps-lg-4",children:[Object(x.jsx)("h2",{className:"mt-0",children:null===z||void 0===z||null===(c=z.client)||void 0===c?void 0:c.name}),Object(x.jsxs)("p",{className:"mb-1",children:[Object(x.jsx)("b",{children:"Data da vistoria:"})," ",O()(null===z||void 0===z||null===(t=z.serviceSchedule)||void 0===t?void 0:t.promised_date).format("DD/MM/YYYY H:mma")]}),Object(x.jsx)("div",{className:"mt-4",children:Object(x.jsxs)("p",{style:{fontSize:"1.5rem"},children:[Object(x.jsx)("b",{children:"Ve\xedculo"}),": ",null===z||void 0===z||null===(b=z.vehicle)||void 0===b?void 0:b.name]})}),Object(x.jsx)("div",{className:"mt-4",children:Object(x.jsxs)("p",{style:{fontSize:"1.5rem"},children:[Object(x.jsx)("b",{children:"Cor"}),": ",null===z||void 0===z||null===(m=z.clientVehicle)||void 0===m?void 0:m.color]})}),Object(x.jsx)("div",{className:"mt-4",children:Object(x.jsxs)("p",{style:{fontSize:"1.5rem"},children:[Object(x.jsx)("b",{children:"Consultor"}),": ",null===z||void 0===z||null===(f=z.technicalConsultant)||void 0===f?void 0:f.name]})}),Object(x.jsx)("div",{className:"mt-4",children:Object(x.jsxs)("p",{style:{fontSize:"1.5rem"},children:[Object(x.jsx)("b",{children:"Placa"}),": ",null===z||void 0===z||null===(g=z.clientVehicle)||void 0===g?void 0:g.plate]})}),Object(x.jsx)("div",{className:"mt-4",children:Object(x.jsxs)("p",{style:{fontSize:"1.5rem"},children:[Object(x.jsx)("b",{children:"Chassi"}),": ",null===z||void 0===z||null===(N=z.clientVehicle)||void 0===N?void 0:N.chasis]})}),Object(x.jsx)("div",{className:"mt-4",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsxs)("div",{className:"col-md-4",children:[Object(x.jsx)("h6",{className:"font-14",children:"Vistorias finalizadas:"}),Object(x.jsxs)("p",{className:"text-sm lh-150",children:[((null===D||void 0===D?void 0:D.stages)||[]).filter((function(e){return e.pivot.completed})).length,"/",((null===D||void 0===D?void 0:D.stages)||[]).length]})]}),Object(x.jsxs)("div",{className:"col-md-4",children:[Object(x.jsx)("h6",{className:"font-14",children:"N\xfamero do checklist:"}),Object(x.jsx)("p",{className:"text-sm lh-150",children:null===D||void 0===D?void 0:D.id})]})]})})]})})]}),P.map((function(e){return Object(x.jsx)(o.a,{children:Object(x.jsx)("div",{className:"table-responsive mt-4",children:Object(x.jsxs)("table",{className:"table table-bordered table-centered mb-0",children:[Object(x.jsxs)("thead",{className:"table-light",children:[Object(x.jsx)("tr",{children:Object(x.jsxs)("th",{colSpan:4,className:"text-center",children:[e.name," ",e.pivot.completed?"(Finalizado)":null]})}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{width:"40%",children:"Item"}),Object(x.jsx)("th",{width:"10%",children:"Imagem ?"}),Object(x.jsx)("th",{width:"20%",children:"Resposta"}),Object(x.jsx)("th",{width:"30%",children:"Coment\xe1rio"})]})]}),Object(x.jsx)("tbody",{children:e.items.map((function(e){var c,t,i,l,n,s;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:e.name}),Object(x.jsx)("td",{children:(null===(c=q[e.id])||void 0===c?void 0:c.evidence)&&(null===(t=q[e.id])||void 0===t?void 0:t.evidence.length)>0?"Sim":"Nao"}),Object(x.jsx)("td",{children:"boolean"===(null===(i=q[e.id])||void 0===i?void 0:i.type)?(null===(l=q[e.id])||void 0===l?void 0:l.value)?Object(x.jsx)(h.a,{className:"bg-success-lighten text-success",children:"Sim"}):Object(x.jsx)(h.a,{className:"bg-danger-lighten text-danger",children:"Nao"}):null===(n=q[e.id])||void 0===n?void 0:n.value}),Object(x.jsx)("td",{children:null===(s=q[e.id])||void 0===s?void 0:s.observations})]})}))})]})})})}))]})})})})]})}},160:function(e,c,t){"use strict";t(0);var i=t(222),l=t(89),n=t(274),s=t(6),a=t(1);c.a=function(e){var c,t,d=Object(s.g)().companyId;return Object(a.jsx)(i.a,{children:Object(a.jsx)(l.a,{children:Object(a.jsxs)("div",{className:"page-title-box",children:[Object(a.jsx)("div",{className:"page-title-right",children:Object(a.jsxs)(n.a,{listProps:{className:"m-0"},children:[Object(a.jsx)(n.a.Item,{href:"/panel/companies",children:"TUNAP"}),Object(a.jsx)(n.a.Item,{hidden:!1===e.insideCompany,href:"/panel/company/".concat((null===(c=e.company)||void 0===c?void 0:c.id)||d,"/dashboard"),children:(null===(t=e.company)||void 0===t?void 0:t.name)||"Empresa"}),e.breadCrumbItems.map((function(c,t){var i;return c.active?Object(a.jsx)(n.a.Item,{active:!0,children:c.label},t):Object(a.jsx)(n.a.Item,{href:!1===e.insideCompany?c.path:"/panel/company/".concat((null===(i=e.company)||void 0===i?void 0:i.id)||d).concat(c.path),children:c.label},t)}))]})}),Object(a.jsx)("h4",{className:"page-title",children:e.title})]})})})}}}]);
//# sourceMappingURL=69.e1d3c9ff.chunk.js.map